(this["webpackJsonpquiplash-js"]=this["webpackJsonpquiplash-js"]||[]).push([[0],{42:function(e,t,a){e.exports=a(81)},47:function(e,t,a){},48:function(e,t,a){},53:function(e,t,a){},77:function(e,t){},80:function(e,t,a){},81:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(40),o=a.n(r),l=(a(47),a(48),a(12)),i=a(1);var m=Object(i.f)((function(e){return s.a.createElement("div",null,s.a.createElement("h1",null,"Quiplash-JS"),s.a.createElement("button",{className:"submit-form-button",onClick:function(){fetch("/create-new-game",{method:"POST"}).then(e=>e.text()).then(t=>{if(!t||4!==t.length)throw new Error("Could not create game.  Server not responding.");e.history.push("/lobby/".concat(t))}).catch(()=>alert("Could not create game.  Server not responding."))}},"Start new Game"))})),c=(a(53),a(23)),h=a.n(c);let u,p;function d(){return u}function E(){return p}class S extends n.Component{constructor(...e){super(...e),this.state={phase:"SHOW_INSTRUCTIONS"}}componentDidMount(){const e=d();e?(e.on("START_GAME",()=>this.setState({phase:"SHOW_INSTRUCTIONS"})),e.on("START_VOTING_PHASE",e=>this.setState({phase:"VOTING_PHASE",prompt:e.prompt,votingOptions:e.answers})),e.on("VOTING_RESULTS",e=>this.setState({phase:"VOTING_RESULTS_PHASE",votingResults:e})),e.on("SHOW_PLAYER_POINTS",e=>this.setState({phase:"SHOW_PLAYER_POINTS",playersAndPoints:e}))):this.props.history.push("/create")}onStartNewGameClick(){d().emit("HOST_STARTING_GAME")}onStartNewRoundClick(){d().emit("HOST_START_ROUND")}render(){switch(this.state.phase){case"SHOW_INSTRUCTIONS":return s.a.createElement("h1",null,"Look at your devices. Fill out a silly answer to your prompt.");case"SHOW_PLAYER_POINTS":return s.a.createElement("div",null,s.a.createElement("h1",null,"Final Scores"),s.a.createElement("div",{className:"player-scores"},this.state.playersAndPoints.map(e=>s.a.createElement("h2",null,"".concat(e[0]," : ").concat(e[1])))),s.a.createElement("button",{className:"submit-form-button start-new-round-button",onClick:this.onStartNewGameClick},"Start New Game"));case"VOTING_PHASE":let e=0;return s.a.createElement("div",null,s.a.createElement("div",{className:"prompt",dangerouslySetInnerHTML:{__html:this.state.prompt}}),s.a.createElement("div",{className:"answers"},this.state.votingOptions.map(t=>{let a="card";return e%2===1&&(a+=" reversed"),e++,s.a.createElement("div",{className:"wrapper"},s.a.createElement("div",{className:a},s.a.createElement("h1",null,t)))})));case"VOTING_RESULTS_PHASE":let t=0;return s.a.createElement("div",null,s.a.createElement("div",{className:"prompt",dangerouslySetInnerHTML:{__html:this.state.prompt}}),s.a.createElement("div",{className:"answers"},this.state.votingResults.map(e=>{let a="card";return t%2===1&&(a+=" reversed"),t++,"WINNER"===e.state?a+=" winning-answer":"LOSER"===e.state&&(a+=" losing-answer"),e.quiplash&&(a+=" winning-quiplash"),s.a.createElement("div",{className:"wrapper"},s.a.createElement("div",{className:a},e.quiplash&&s.a.createElement("div",{className:"quiplash-text"},"QUIPLASH"),s.a.createElement("h1",null,e.answer)),s.a.createElement("div",{className:"submitter"},"Submitted by ".concat(e.submitter)),s.a.createElement("div",{className:"voters"},0===e.votes.length?"No Votes":e.votes.join(", ")))})),s.a.createElement("button",{className:"submit-form-button start-new-round-button",onClick:this.onStartNewRoundClick},"Start Next Round"));default:throw new Error("Invalid Host State ",this.state.phase)}}}var N=Object(i.f)(S);class b extends n.Component{constructor(e){super(e),this.state={phase:"WAITING_TO_START",answer:""},this.handleSubmitAnswerClick=this.handleSubmitAnswerClick.bind(this),this.handleSubmitVoteClick=this.handleSubmitVoteClick.bind(this),this.handleSubmitVoteClick=this.handleSubmitVoteClick.bind(this),this.onAnswerChange=this.onAnswerChange.bind(this)}componentDidMount(){const e=E();e?(e.on("START_GAME",e=>this.setState({phase:"STARTED",promptsToAnswer:e,currentPromptNumber:0})),e.on("START_VOTING_PHASE",e=>this.setState({phase:"VOTING",prompt:e.prompt,votingOptions:e.answers}))):this.props.history.push("/")}handleSubmitAnswerClick(e){e.preventDefault(),this.state.answer&&(E().emit("SUBMIT_ANSWER",{prompt:this.state.promptsToAnswer[this.state.currentPromptNumber],answer:this.state.answer}),this.state.currentPromptNumber>=1?this.setState({answer:"",phase:"SUBMITTED_ANSWER"}):this.setState({answer:"",currentPromptNumber:1}))}handleSubmitVoteClick(e){E().emit("SUBMIT_VOTE",{prompt:this.state.prompt,answerVotedFor:e}),this.setState({phase:"WAITING_FOR_NEXT_ROUND"})}onAnswerChange(e){this.setState({answer:e.target.value})}render(){switch(this.state.phase){case"STARTED":return s.a.createElement("form",{onSubmit:this.handleSubmitAnswerClick},s.a.createElement("div",null,s.a.createElement("h1",{dangerouslySetInnerHTML:{__html:this.state.promptsToAnswer[this.state.currentPromptNumber]}}),s.a.createElement("input",{className:"form-input player",type:"text",placeholder:"Answer Here",value:this.state.answer,onChange:this.onAnswerChange}),s.a.createElement("br",null)),s.a.createElement("button",{className:"player-button",type:"submit"},"Submit"));case"SUBMITTED_ANSWER":return s.a.createElement("h1",null,"Waiting for other players to submit their responses...");case"VOTING":return s.a.createElement("div",null,s.a.createElement("h1",{dangerouslySetInnerHTML:{__html:this.state.prompt}}),s.a.createElement("h2",null,"Which one do you like more?"),this.state.votingOptions.map(e=>s.a.createElement("button",{className:"player-button",onClick:()=>this.handleSubmitVoteClick(e)},e)));case"WAITING_TO_START":return s.a.createElement("h1",null,"Waiting for game to start...");case"WAITING_FOR_NEXT_ROUND":return s.a.createElement("h1",null,"See the results on screen");default:throw new Error("Invalid Player State ",this.state.phase)}}}var T=Object(i.f)(b);class g extends s.a.Component{constructor(e){super(e),this.handleJoinClick=this.handleJoinClick.bind(this),this.onNameChange=this.onNameChange.bind(this),this.onRoomCodeChange=this.onRoomCodeChange.bind(this),this.state={errorMessage:"",playerName:this.getSavedName()}}getSavedName(){const e=localStorage.getItem("QUIPLASH_NAME");return e||""}handleJoinClick(e){e.preventDefault(),localStorage.setItem("QUIPLASH_NAME",this.state.playerName);const t=(p=h()(),p);t.emit("PLAYER_JOIN",{roomCode:this.state.roomCode,playerName:this.state.playerName}),t.on("SUCCESSFULLY_JOINED_ROOM",()=>this.props.history.push("/game/".concat(this.state.roomCode)))}onNameChange(e){this.setState({playerName:e.target.value})}onRoomCodeChange(e){this.setState({roomCode:e.target.value})}render(){return s.a.createElement("form",{onSubmit:this.handleJoinClick},s.a.createElement("h1",null,"Join a Game"),s.a.createElement("div",null,s.a.createElement("label",{className:"form-label"},"Room Code"),s.a.createElement("input",{className:"form-input",type:"text",placeholder:"Four digit code",onChange:this.onRoomCodeChange}),s.a.createElement("br",null),s.a.createElement("label",{className:"form-label"},"Your Name "),s.a.createElement("input",{className:"form-input",type:"text",placeholder:"Name",defaultValue:this.getSavedName(),onChange:this.onNameChange}),s.a.createElement("br",null)),s.a.createElement("button",{className:"player-button",type:"submit"},"Play"),s.a.createElement("div",null,this.state.errorMessage))}}var v=Object(i.f)(g);a(80);class C extends n.Component{constructor(...e){super(...e),this.state={lobbyPlayers:[]}}componentDidMount(){const e=(u=h()(),u);e?(e.emit("HOST_JOINED_ROOM",this.getRoomCode()),e.on("LOBBY_PLAYERS_UPDATED",e=>{this.setState({lobbyPlayers:e})})):this.props.history.push("/create")}getConnectedPlayersComponent(){return 0===this.state.lobbyPlayers.length?s.a.createElement("div",null,"No connected players yet."):this.state.lobbyPlayers.map(e=>s.a.createElement("div",{key:e.id},e.name))}getRoomCode(){return this.props.location.pathname.split("/lobby/")[1]}onStartGameClick(){if(this.state.lobbyPlayers.length<3)return void alert("You need at least three players to play this game.");if(this.state.lobbyPlayers.length>8)return void alert("You have too many players.  Max number of players is 8.");d().emit("HOST_STARTING_GAME"),this.props.history.push("/hostsgame")}render(){return s.a.createElement("div",null,s.a.createElement("h1",null,"Quiplash-JS"),s.a.createElement("div",{className:"lobby-room-instructions"},"Go to ",s.a.createElement("span",{className:"room-url"},"quiplashjs.herokuapp.com")," on your mobile device"),s.a.createElement("div",{className:"lobby-room-code-text"},"Room Code"),s.a.createElement("div",{className:"room-code"},this.getRoomCode()),s.a.createElement("div",{className:"connected-players"},this.getConnectedPlayersComponent()),s.a.createElement("button",{className:"submit-form-button",onClick:this.onStartGameClick.bind(this)},"Start Game"))}}var y=Object(i.f)(C);class _ extends n.Component{render(){return s.a.createElement(l.a,null,s.a.createElement("div",{className:"centered-text colorful-background"},s.a.createElement("div",{style:{position:"absolute",top:0,left:0,opacity:0}},s.a.createElement(l.b,{to:"/create"},"HOST"),s.a.createElement("br",null),s.a.createElement(l.b,{to:"/"},"JOIN")),s.a.createElement(i.c,null,s.a.createElement(i.a,{exact:!0,path:"/"},s.a.createElement(v,null)),s.a.createElement(i.a,{path:"/create"},s.a.createElement(m,null)),s.a.createElement(i.a,{path:"/game"},s.a.createElement(T,null)),s.a.createElement(i.a,{path:"/hostsgame"},s.a.createElement(N,null)),s.a.createElement(i.a,{path:"/lobby"},s.a.createElement(y,null)))))}}var w=_;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(w,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()}).catch(e=>{console.error(e.message)})}},[[42,1,2]]]);
//# sourceMappingURL=main.bb63437f.chunk.js.map